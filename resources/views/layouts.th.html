<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeHouse Layouts Demo</title>
    
    <!-- TreeHouse Framework Favicons -->
    <link rel="icon" type="image/x-icon" href="/_assets/treehouse/img/favicon/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/_assets/treehouse/img/favicon/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="/_assets/treehouse/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/_assets/treehouse/img/favicon/favicon-96x96.png">
    <link rel="manifest" href="/_assets/treehouse/img/favicon/site.webmanifest">
    
    <!-- Vite Assets -->
    <script th:raw="__vite_assets"></script>
        
    <!-- TreeHouse Framework Assets -->
    <script th:raw="__treehouse_config"></script>
    <script th:raw="__treehouse_js"></script>
</head>
<body class="h-full bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <img src="/_assets/treehouse/img/treehouse-logo.svg" alt="TreeHouse Framework" class="h-8 w-auto">
                    <div class="hidden sm:block">
                        <h1 class="text-xl font-semibold text-gray-900">TreeHouse</h1>
                        <p class="text-xs text-gray-500">Layouts Demo</p>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center space-x-6">
                    <a href="/" class="text-gray-700 hover:text-treehouse-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Home</a>
                    <a href="/templating" class="text-gray-700 hover:text-treehouse-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Templating</a>
                    <a href="/components" class="text-gray-700 hover:text-treehouse-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Components</a>
                    <a href="/layouts" class="text-treehouse-600 px-3 py-2 rounded-md text-sm font-medium bg-treehouse-50">Layouts</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Page Header -->
        <div class="mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">TreeHouse Layouts</h1>
            <p class="text-xl text-gray-600">Template inheritance and section management with dynamic content</p>
        </div>

        <!-- Layout System Overview -->
        <div class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-900 mb-6">Layout System Architecture</h2>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Master Layout Structure -->
                <div class="treehouse-card p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Master Layout Structure</h3>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto text-sm">
                        <pre><code>&lt;!-- layout.master.th.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{site.name} - {page.title}&lt;/title&gt;
    &lt;meta th:attr="description=page.meta.description"&gt;
    
    &lt;!-- Dynamic CSS includes --&gt;
    &lt;link th:repeat="css page.styles" 
          th:attr="href=css.url"&gt;
&lt;/head&gt;
&lt;body th:attr="class=page.body.class"&gt;
    &lt;!-- Navigation Section --&gt;
    &lt;nav th:yield="navigation"&gt;
        &lt;!-- Default navigation --&gt;
    &lt;/nav&gt;
    
    &lt;!-- Breadcrumbs Section --&gt;
    &lt;div th:if="page.breadcrumbs.show" 
         th:yield="breadcrumbs"&gt;
        &lt;!-- Default breadcrumbs --&gt;
    &lt;/div&gt;
    
    &lt;!-- Main Content Section --&gt;
    &lt;main th:yield="content"&gt;
        &lt;p&gt;Default content&lt;/p&gt;
    &lt;/main&gt;
    
    &lt;!-- Sidebar Section --&gt;
    &lt;aside th:yield="sidebar"&gt;
        &lt;!-- Optional sidebar --&gt;
    &lt;/aside&gt;
    
    &lt;!-- Footer Section --&gt;
    &lt;footer th:yield="footer"&gt;
        &lt;p&gt;Â© {site.year} {site.name}&lt;/p&gt;
    &lt;/footer&gt;
    
    &lt;!-- Dynamic JavaScript includes --&gt;
    &lt;script th:repeat="js page.scripts" 
            th:attr="src=js.url"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                </div>

                <!-- Child Page Implementation -->
                <div class="treehouse-card p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Child Page Implementation</h3>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto text-sm">
                        <pre><code>&lt;!-- page.th.html --&gt;
&lt;div th:extend="layout.master"&gt;
    
    &lt;!-- Override navigation --&gt;
    &lt;nav th:section="navigation"&gt;
        &lt;div class="custom-nav"&gt;
            &lt;a th:repeat="item nav.items" 
               th:attr="href=item.url, 
                        class=item.active ? 'active' : ''"&gt;
                {item.title}
            &lt;/a&gt;
        &lt;/div&gt;
    &lt;/nav&gt;
    
    &lt;!-- Custom breadcrumbs --&gt;
    &lt;div th:section="breadcrumbs"&gt;
        &lt;nav class="breadcrumb"&gt;
            &lt;span th:repeat="crumb page.breadcrumbs.items"&gt;
                &lt;a th:if="crumb.url" 
                   th:attr="href=crumb.url"&gt;{crumb.title}&lt;/a&gt;
                &lt;span th:unless="crumb.url"&gt;{crumb.title}&lt;/span&gt;
                &lt;span th:unless="crumbStat.last"&gt; &gt; &lt;/span&gt;
            &lt;/span&gt;
        &lt;/nav&gt;
    &lt;/div&gt;
    
    &lt;!-- Main content --&gt;
    &lt;main th:section="content"&gt;
        &lt;h1&gt;{page.title}&lt;/h1&gt;
        &lt;div th:attr="class=content.wrapper.class"&gt;
            &lt;p&gt;{content.body}&lt;/p&gt;
            
            &lt;!-- Dynamic content blocks --&gt;
            &lt;div th:repeat="block content.blocks" 
                 th:attr="class=block.css_class"&gt;
                &lt;h2&gt;{block.title}&lt;/h2&gt;
                &lt;div th:raw="block.content"&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/main&gt;
    
    &lt;!-- Optional sidebar --&gt;
    &lt;aside th:section="sidebar" th:if="sidebar.show"&gt;
        &lt;div th:repeat="widget sidebar.widgets" 
             th:attr="class=widget.css_class"&gt;
            &lt;h3&gt;{widget.title}&lt;/h3&gt;
            &lt;div th:raw="widget.content"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/aside&gt;
    
&lt;/div&gt;</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Examples -->
        <div class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-900 mb-6">Dynamic Section Examples</h2>
            
            <!-- Custom Navigation Example -->
            <div class="treehouse-card p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Dynamic Navigation</h3>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500 mb-4">
                    <nav class="flex space-x-6">
                        <a th:repeat="item nav.main.items" 
                           th:attr="href=item.url, 
                                    class=item.active ? 'text-treehouse-600 font-medium' : 'text-gray-700 hover:text-treehouse-600',
                                    title=item.description"
                           class="px-3 py-2 rounded-md text-sm transition-colors">
                            {item.title}
                            <span th:if="item.badge" th:attr="class='ml-2 px-2 py-1 text-xs rounded-full ' + item.badge.css">
                                {item.badge.text}
                            </span>
                        </a>
                    </nav>
                </div>
                
                <div class="text-sm text-gray-600 bg-gray-100 p-3 rounded">
                    <strong>Template Code:</strong><br>
                    <code class="text-xs">&lt;a th:repeat="item nav.main.items" th:attr="href=item.url, class=item.active ? 'active' : ''"&gt;{item.title}&lt;/a&gt;</code>
                </div>
            </div>

            <!-- Dynamic Breadcrumbs -->
            <div class="treehouse-card p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Dynamic Breadcrumbs</h3>
                
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-green-500 mb-4">
                    <nav class="flex items-center space-x-2 text-sm">
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                        </svg>
                        
                        <span th:repeat="crumb breadcrumbs.items" class="flex items-center">
                            <a th:if="crumb.url" 
                               th:attr="href=crumb.url" 
                               class="text-gray-600 hover:text-treehouse-600 transition-colors">
                                {crumb.title}
                            </a>
                            <span th:unless="crumb.url" class="text-gray-900 font-medium">
                                {crumb.title}
                            </span>
                            
                            <svg th:unless="crumbStat.last" class="w-4 h-4 mx-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </span>
                    </nav>
                </div>
                
                <div class="text-sm text-gray-600 bg-gray-100 p-3 rounded">
                    <strong>Template Code:</strong><br>
                    <code class="text-xs">&lt;span th:repeat="crumb breadcrumbs.items"&gt;&lt;a th:if="crumb.url" th:attr="href=crumb.url"&gt;{crumb.title}&lt;/a&gt;&lt;/span&gt;</code>
                </div>
            </div>

            <!-- Dynamic Content Blocks -->
            <div class="treehouse-card p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Dynamic Content Blocks</h3>
                
                <div class="space-y-6">
                    <!-- Text Block -->
                    <div th:repeat="block content.blocks" th:attr="class='p-4 rounded-lg border-l-4 ' + block.border_color + ' ' + block.background_color">
                        <div class="flex items-center justify-between mb-3">
                            <h4 th:attr="class='font-semibold ' + block.title_color">{block.title}</h4>
                            <span th:if="block.type" th:attr="class='px-2 py-1 text-xs rounded-full ' + block.type.css">
                                {block.type.label}
                            </span>
                        </div>
                        
                        <div th:if="block.content" th:raw="block.content" class="prose prose-sm max-w-none"></div>
                        
                        <div th:if="block.metadata.show" class="mt-3 pt-3 border-t border-gray-200">
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span>Author: {block.metadata.author}</span>
                                <span>Updated: {block.metadata.updated}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 text-sm text-gray-600 bg-gray-100 p-3 rounded">
                    <strong>Template Code:</strong><br>
                    <code class="text-xs">&lt;div th:repeat="block content.blocks" th:attr="class='p-4 rounded-lg ' + block.background_color"&gt;&lt;h4&gt;{block.title}&lt;/h4&gt;&lt;div th:raw="block.content"&gt;&lt;/div&gt;&lt;/div&gt;</code>
                </div>
            </div>
        </div>

        <!-- Sidebar Widgets Example -->
        <div class="grid lg:grid-cols-3 gap-8 mb-12">
            <div class="lg:col-span-2">
                <div class="treehouse-card p-6">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">Main Content Area</h2>
                    <p class="text-gray-600 mb-4">This demonstrates how the main content area works alongside dynamic sidebar widgets.</p>
                    
                    <div class="prose prose-lg max-w-none">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
                        
                        <h3>Dynamic Content Integration</h3>
                        <p>The TreeHouse layout system allows for seamless integration of dynamic content with dot notation access to data structures.</p>
                        
                        <ul>
                            <li>Template inheritance with th:extend</li>
                            <li>Section overrides with th:section</li>
                            <li>Conditional rendering with th:if/th:unless</li>
                            <li>Dynamic attributes with th:attr</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Dynamic Sidebar -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-gray-900">Dynamic Sidebar Widgets</h3>
                
                <!-- Widget 1: Recent Posts -->
                <div th:repeat="widget sidebar.widgets" th:attr="class='treehouse-card p-4 ' + widget.css_class">
                    <h4 class="font-semibold text-gray-900 mb-3">{widget.title}</h4>
                    
                    <div th:if="widget.type == 'recent_posts'" class="space-y-2">
                        <div th:repeat="post widget.data.posts" class="pb-2 border-b border-gray-100 last:border-b-0">
                            <a th:attr="href=post.url" class="text-sm font-medium text-gray-900 hover:text-treehouse-600 block">
                                {post.title}
                            </a>
                            <p class="text-xs text-gray-500">{post.date}</p>
                        </div>
                    </div>
                    
                    <div th:if="widget.type == 'stats'" class="space-y-2">
                        <div th:repeat="stat widget.data.stats" class="flex justify-between">
                            <span class="text-sm text-gray-600">{stat.label}:</span>
                            <span class="text-sm font-medium">{stat.value}</span>
                        </div>
                    </div>
                    
                    <div th:if="widget.type == 'links'" class="space-y-1">
                        <a th:repeat="link widget.data.links" 
                           th:attr="href=link.url, target=link.external ? '_blank' : '_self'" 
                           class="block text-sm text-treehouse-600 hover:text-treehouse-700">
                            {link.title}
                            <svg th:if="link.external" class="inline w-3 h-3 ml-1" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"></path>
                                <path d="M5 5a2 2 0 00-2 2v6a2 2 0 002 2h6a2 2 0 002-2v-2a1 1 0 10-2 0v2H5V7h2a1 1 0 000-2H5z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layout Code Example -->
        <div class="treehouse-card p-6">
            <h2 class="text-2xl font-semibold text-gray-900 mb-6">Complete Layout Example</h2>
            
            <div class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto">
                <pre class="text-sm"><code>&lt;!-- Child page using layout system --&gt;
&lt;div th:extend="layouts.master"&gt;
    
    &lt;!-- Custom page title --&gt;
    &lt;title th:section="title"&gt;{page.title} - {site.name}&lt;/title&gt;
    
    &lt;!-- Additional head content --&gt;
    &lt;head th:section="head"&gt;
        &lt;meta th:attr="description=page.meta.description"&gt;
        &lt;link th:repeat="css page.styles" th:attr="href=css.url"&gt;
    &lt;/head&gt;
    
    &lt;!-- Navigation override --&gt;
    &lt;nav th:section="navigation"&gt;
        &lt;div class="navbar"&gt;
            &lt;a th:repeat="item nav.items" 
               th:attr="href=item.url, 
                        class=item.active ? 'nav-link active' : 'nav-link'"&gt;
                {item.title}
            &lt;/a&gt;
        &lt;/div&gt;
    &lt;/nav&gt;
    
    &lt;!-- Main content section --&gt;
    &lt;main th:section="content"&gt;
        &lt;div class="container"&gt;
            &lt;h1&gt;{page.title}&lt;/h1&gt;
            
            &lt;!-- Dynamic content blocks --&gt;
            &lt;div th:repeat="block content.blocks" 
                 th:attr="class='content-block ' + block.type"&gt;
                &lt;h2 th:if="block.title"&gt;{block.title}&lt;/h2&gt;
                &lt;div th:raw="block.content"&gt;&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;!-- Conditional sections --&gt;
            &lt;div th:if="page.show_comments" class="comments"&gt;
                &lt;h3&gt;Comments ({comments.count})&lt;/h3&gt;
                &lt;div th:repeat="comment comments.items"&gt;
                    &lt;div class="comment"&gt;
                        &lt;strong&gt;{comment.author.name}&lt;/strong&gt;
                        &lt;span class="date"&gt;{comment.date}&lt;/span&gt;
                        &lt;p&gt;{comment.content}&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/main&gt;
    
    &lt;!-- Dynamic sidebar --&gt;
    &lt;aside th:section="sidebar" th:if="sidebar.show"&gt;
        &lt;div th:repeat="widget sidebar.widgets" 
             th:attr="class='widget ' + widget.type"&gt;
            &lt;h3&gt;{widget.title}&lt;/h3&gt;
            &lt;div th:raw="widget.content"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/aside&gt;
    
&lt;/div&gt;</code></pre>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-3 mb-4 md:mb-0">
                    <img src="/_assets/treehouse/img/treehouse-logo.svg" alt="TreeHouse Framework" class="h-6 w-auto filter brightness-0 invert">
                    <span class="text-sm">TreeHouse Layouts Demo</span>
                </div>
                <div class="text-sm text-gray-400">
                    Powered by TreeHouse Framework with Vite + Tailwind CSS
                </div>
            </div>
        </div>
    </footer>
</body>
</html>