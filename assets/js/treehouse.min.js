/**
 * TreeHouse Framework JavaScript Library - Minified
 * @package LengthOfRope\TreeHouse\Assets
 * @author  Bas de Kort <bdekort@proton.me>
 * @since   1.0.0
 */
class TreeHouse{constructor(){this.modules=new Map;this.config={};this.ready=!1;this.eventListeners=new Map;this.readyCallbacks=[]}register(e,t){return this.modules.has(e)?(console.warn(`TreeHouse: Module '${e}' is already registered`),this):(t.init&&"function"==typeof t.init||(()=>{throw new Error(`TreeHouse: Module '${e}' must have an init() method`)})(),t.name=e,t.dependencies=t.dependencies||[],t.loaded=!1,this.modules.set(e,t),console.log(`TreeHouse: Module '${e}' registered`),this)}async use(e){if(!this.modules.has(e))throw new Error(`TreeHouse: Module '${e}' is not registered`);const t=this.modules.get(e);if(t.loaded)return t;for(const t of t.dependencies)await this.use(t);try{return console.log(`TreeHouse: Loading module '${e}'`),await t.init.call(t,this.config),t.loaded=!0,this.emit("module:loaded",{name:e,module:t}),console.log(`TreeHouse: Module '${e}' loaded successfully`),t}catch(t){throw console.error(`TreeHouse: Failed to load module '${e}':`,t),t}}configure(e){return this.config={...this.config,...e},this.emit("config:updated",this.config),this}on(e,t){return this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t),this}off(e,t){if(!this.eventListeners.has(e))return this;const s=this.eventListeners.get(e),n=s.indexOf(t);return n>-1&&s.splice(n,1),this}emit(e,t){return this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(e=>{try{e(t)}catch(e){console.error(`TreeHouse: Error in event listener for '${e}':`,e)}}),this}ready(e){return this.ready?e():this.readyCallbacks.push(e),this}markReady(){return this.ready||(this.ready=!0,console.log("TreeHouse: Framework ready"),this.readyCallbacks.forEach(e=>{try{e()}catch(e){console.error("TreeHouse: Error in ready callback:",e)}}),this.readyCallbacks=[],this.emit("ready")),this}getModule(e){return this.modules.get(e)||null}isModuleLoaded(e){const t=this.modules.get(e);return!!t&&t.loaded}getModuleNames(){return Array.from(this.modules.keys())}static domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}static merge(e,t){const s={...e};for(const e in t)t.hasOwnProperty(e)&&("object"==typeof t[e]&&null!==t[e]&&!Array.isArray(t[e])?s[e]=TreeHouse.merge(s[e]||{},t[e]):s[e]=t[e]);return s}}window.TreeHouse=new TreeHouse,TreeHouse.domReady(()=>{window.TreeHouse.markReady()}),"undefined"!=typeof module&&module.exports&&(module.exports=TreeHouse);